const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/InfoPage-BWfbGv18.js","assets/icons-B_r_9z2t.js","assets/vendor-VIAh7PwP.js"])))=>i.map(i=>d[i]);
import{r as e,a as t}from"./vendor-VIAh7PwP.js";import{T as a,A as s,a as n,I as r,S as i,C as l,M as d,b as o,c,d as m,X as u,e as x,U as h,f as g,g as f,W as p,h as b,i as y}from"./icons-B_r_9z2t.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var j={exports:{}},w={},N=e,v=Symbol.for("react.element"),S=Symbol.for("react.fragment"),M=Object.prototype.hasOwnProperty,H=N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,D={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,a){var s,n={},r=null,i=null;for(s in void 0!==a&&(r=""+a),void 0!==t.key&&(r=""+t.key),void 0!==t.ref&&(i=t.ref),t)M.call(t,s)&&!D.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:v,type:e,key:r,ref:i,props:n,_owner:H.current}}w.Fragment=S,w.jsx=T,w.jsxs=T,j.exports=w;var B,k=j.exports,I=t;B=I.createRoot,I.hydrateRoot;const E={};function O({onInfoClick:e,showBackButton:t=!1}){return k.jsx("header",{className:"bg-red-600 text-white py-4 sm:py-6 shadow-lg",children:k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:k.jsx(a,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),k.jsxs("div",{children:[k.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"BahnPulse"}),k.jsx("p",{className:"text-red-100 text-xs sm:text-sm",children:"Deutsche Bahn Journey Planner"})]})]}),k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-red-100",children:[k.jsx(s,{className:"w-5 h-5"}),k.jsx("span",{className:"text-sm",children:"Live Predictions"})]}),t?k.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 py-2 bg-white bg-opacity-20 rounded-lg hover:bg-opacity-30 transition-colors","aria-label":"Go back",children:[k.jsx(n,{className:"w-5 h-5"}),k.jsx("span",{className:"hidden sm:inline",children:"Back"})]}):k.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 py-2 bg-white bg-opacity-20 rounded-lg hover:bg-opacity-30 transition-colors","aria-label":"About this project",children:[k.jsx(r,{className:"w-5 h-5"}),k.jsx("span",{className:"hidden sm:inline",children:"About"})]})]})]})})})}const C=[{id:"8000105",name:"Berlin Hauptbahnhof",city:"Berlin"},{id:"8000261",name:"München Hauptbahnhof",city:"München"},{id:"8000152",name:"Frankfurt(Main)Hbf",city:"Frankfurt"},{id:"8000207",name:"Hamburg Hbf",city:"Hamburg"},{id:"8000191",name:"Hannover Hbf",city:"Hannover"},{id:"8000096",name:"Stuttgart Hbf",city:"Stuttgart"},{id:"8000085",name:"Nürnberg Hbf",city:"Nürnberg"},{id:"8000068",name:"Dresden Hbf",city:"Dresden"},{id:"8000244",name:"Leipzig Hbf",city:"Leipzig"},{id:"8000080",name:"Köln Hbf",city:"Köln"},{id:"8000098",name:"Düsseldorf Hbf",city:"Düsseldorf"},{id:"8000115",name:"Essen Hbf",city:"Essen"},{id:"8000169",name:"Dortmund Hbf",city:"Dortmund"},{id:"8000284",name:"Bremen Hbf",city:"Bremen"},{id:"8010255",name:"Berlin Ostbahnhof",city:"Berlin"},{id:"8011160",name:"Berlin Südkreuz",city:"Berlin"},{id:"8010404",name:"Berlin Gesundbrunnen",city:"Berlin"},{id:"8013456",name:"Berlin Potsdamer Platz",city:"Berlin"},{id:"8089021",name:"Berlin Brandenburg Airport",city:"Berlin"},{id:"8000262",name:"München Ost",city:"München"},{id:"8004158",name:"München Pasing",city:"München"},{id:"8000346",name:"München Flughafen",city:"München"},{id:"8000281",name:"Frankfurt(Main)Süd",city:"Frankfurt"},{id:"8070003",name:"Frankfurt(M) Flughafen Fernbf",city:"Frankfurt"},{id:"8002549",name:"Hamburg-Altona",city:"Hamburg"},{id:"8004960",name:"Hamburg Dammtor",city:"Hamburg"},{id:"8002553",name:"Hamburg-Harburg",city:"Hamburg"},{id:"8000001",name:"Aachen Hbf",city:"Aachen"},{id:"8000013",name:"Augsburg Hbf",city:"Augsburg"},{id:"8000025",name:"Bamberg",city:"Bamberg"},{id:"8000036",name:"Bielefeld Hbf",city:"Bielefeld"},{id:"8000049",name:"Bochum Hbf",city:"Bochum"},{id:"8000050",name:"Bonn Hbf",city:"Bonn"},{id:"8000056",name:"Braunschweig Hbf",city:"Braunschweig"},{id:"8000107",name:"Karlsruhe Hbf",city:"Karlsruhe"},{id:"8000128",name:"Kiel Hbf",city:"Kiel"},{id:"8000156",name:"Freiburg(Breisgau) Hbf",city:"Freiburg"},{id:"8000170",name:"Göttingen",city:"Göttingen"},{id:"8000183",name:"Halle(Saale)Hbf",city:"Halle"},{id:"8000206",name:"Heidelberg Hbf",city:"Heidelberg"},{id:"8000230",name:"Kassel-Wilhelmshöhe",city:"Kassel"},{id:"8000237",name:"Koblenz Hbf",city:"Koblenz"},{id:"8000252",name:"Lübeck Hbf",city:"Lübeck"},{id:"8000263",name:"Magdeburg Hbf",city:"Magdeburg"},{id:"8000266",name:"Mainz Hbf",city:"Mainz"},{id:"8000268",name:"Mannheim Hbf",city:"Mannheim"},{id:"8000286",name:"Münster(Westf)Hbf",city:"Münster"},{id:"8000294",name:"Oldenburg(Oldb)Hbf",city:"Oldenburg"},{id:"8000297",name:"Osnabrück Hbf",city:"Osnabrück"},{id:"8000299",name:"Paderborn Hbf",city:"Paderborn"},{id:"8000309",name:"Regensburg Hbf",city:"Regensburg"},{id:"8000320",name:"Rostock Hbf",city:"Rostock"},{id:"8000323",name:"Saarbrücken Hbf",city:"Saarbrücken"},{id:"8000342",name:"Ulm Hbf",city:"Ulm"},{id:"8000350",name:"Wiesbaden Hbf",city:"Wiesbaden"},{id:"8000368",name:"Würzburg Hbf",city:"Würzburg"}];function L({value:t,onChange:a,placeholder:s,label:n,disabled:r=!1}){const[o,c]=e.useState(""),[m,u]=e.useState(!1),[x,h]=e.useState(""),g=e.useRef(null),f=e.useRef(null);e.useEffect(()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const p=C.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())||e.city.toLowerCase().includes(o.toLowerCase()));return k.jsxs("div",{ref:g,className:"relative",children:[k.jsx("label",{htmlFor:`station-${n}`,className:"block text-sm font-medium text-gray-700 mb-2",children:n}),k.jsxs("div",{className:"relative",children:[k.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:k.jsx(i,{className:"w-4 h-4 text-gray-400"})}),k.jsx("input",{ref:f,id:`station-${n}`,type:"text",value:o,onChange:e=>{const t=e.target.value;c(t),u(!0),t!==x&&(a("",""),h(""))},onFocus:()=>{u(!0)},placeholder:s,disabled:r,className:"w-full pl-10 pr-10 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-gray-900 text-sm sm:text-base disabled:bg-gray-100 disabled:cursor-not-allowed",autoComplete:"off"}),k.jsx("button",{type:"button",onClick:()=>{var e;u(!m),m||null==(e=f.current)||e.focus()},disabled:r,className:"absolute inset-y-0 right-0 pr-3 flex items-center disabled:cursor-not-allowed","aria-label":"Toggle station list",children:k.jsx(l,{className:"w-4 h-4 text-gray-400 transition-transform "+(m?"rotate-180":"")})})]}),m&&k.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:p.length>0?p.map(e=>k.jsx("button",{onClick:()=>(e=>{h(e.name),c(e.name),u(!1),a(e.id,e.name)})(e),className:"w-full px-4 py-3 text-left hover:bg-gray-50 focus:bg-gray-50 focus:outline-none border-b border-gray-100 last:border-b-0",children:k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx(d,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),k.jsxs("div",{children:[k.jsx("div",{className:"font-medium text-gray-900 text-sm",children:e.name}),k.jsx("div",{className:"text-xs text-gray-500",children:e.city})]})]})},e.id)):k.jsxs("div",{className:"px-4 py-3 text-gray-500 text-sm text-center",children:['No stations found matching "',o,'"']})})]})}function P({onSearch:t,loading:a}){const[s,n]=e.useState(""),[r,l]=e.useState(""),[d,c]=e.useState(""),[m,u]=e.useState("");return k.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-8 mb-6 sm:mb-8",children:[k.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4 sm:mb-6 text-center",children:"Plan Your Journey"}),k.jsxs("form",{onSubmit:e=>{e.preventDefault(),s&&r&&s!==r&&t(s,r,d,m)},className:"space-y-4 sm:space-y-6",children:[k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:[k.jsx(L,{value:s,onChange:(e,t)=>{n(e),c(t)},placeholder:"Search departure station...",label:"From",disabled:a}),k.jsx(L,{value:r,onChange:(e,t)=>{l(e),u(t)},placeholder:"Search destination station...",label:"To",disabled:a})]}),k.jsx("div",{className:"flex justify-center",children:k.jsx("button",{type:"button",onClick:()=>{const e=s,t=d;n(r),c(m),l(e),u(t)},disabled:a,className:"p-2 sm:p-3 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Swap stations","aria-label":"Swap departure and destination stations",children:k.jsx(o,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),k.jsx("button",{type:"submit",disabled:!s||!r||s===r||a,className:"w-full bg-red-600 text-white py-3 sm:py-4 px-4 sm:px-6 rounded-lg font-semibold \n                     hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed \n                     transition-colors flex items-center justify-center gap-2 text-sm sm:text-base",children:a?k.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white"}):k.jsxs(k.Fragment,{children:[k.jsx(i,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Search Connections"]})})]})]})}function $({train:e,isFirst:t=!1,isLast:a=!1}){return k.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 shadow-sm hover:shadow-md transition-shadow",children:[k.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 sm:mb-4 gap-2",children:[k.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[k.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-semibold ${(()=>{switch(e.type){case"ICE":return"bg-red-100 text-red-800";case"IC":return"bg-blue-100 text-blue-800";case"RE":return"bg-green-100 text-green-800";case"RB":return"bg-purple-100 text-purple-800";case"S":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}})()}`,children:e.type}),k.jsx("span",{className:"font-bold text-gray-900 text-sm sm:text-base",children:e.number})]}),k.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{switch(e.status){case"on-time":return k.jsx(x,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-500"});case"delayed":return k.jsx(m,{className:"w-3 h-3 sm:w-4 sm:h-4 text-yellow-500"});case"cancelled":return k.jsx(u,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-500"});default:return null}})(),k.jsx("span",{className:"text-xs sm:text-sm font-medium "+(e.predictedDelay>0?"text-red-600":"text-green-600"),children:"cancelled"===e.status?"Cancelled":e.predictedDelay>0?`+${e.predictedDelay} min`:"On time"})]})]}),k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[k.jsxs("div",{children:[k.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[k.jsx(d,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500"}),k.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:t?"Departure":"Transfer"})]}),k.jsx("div",{className:"font-semibold text-gray-900 text-sm sm:text-base mb-1",children:e.from.name}),k.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[k.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[k.jsx(c,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500"}),k.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-900",children:e.departure})]}),k.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:["Platform ",e.platform]})]})]}),k.jsxs("div",{children:[k.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[k.jsx(d,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500"}),k.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:a?"Arrival":"Transfer"})]}),k.jsx("div",{className:"font-semibold text-gray-900 text-sm sm:text-base mb-1",children:e.to.name}),k.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[k.jsx(c,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500"}),k.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-900",children:e.arrival})]})]})]}),e.predictedDelay>5&&k.jsx("div",{className:"mt-3 sm:mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:k.jsxs("div",{className:"flex items-start gap-2",children:[k.jsx(m,{className:"w-3 h-3 sm:w-4 sm:h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),k.jsxs("span",{className:"text-xs sm:text-sm text-yellow-800",children:["Delay prediction: ",e.predictedDelay," minutes based on current traffic"]})]})})]})}function R({route:e}){return k.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 sm:p-6 border border-gray-200",children:[k.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6 gap-3",children:[k.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(c,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600"}),k.jsx("span",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:(t=e.totalDuration,`${Math.floor(t/60)}h ${t%60}m`)})]}),k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(h,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600"}),k.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:[e.transfers," transfer",1!==e.transfers?"s":""]})]})]}),e.totalDelay>0&&k.jsxs("div",{className:"px-2 sm:px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs sm:text-sm font-medium self-start sm:self-auto",children:["+",e.totalDelay," min delay"]})]}),k.jsx("div",{className:"space-y-3 sm:space-y-4",children:e.trains.map((t,a)=>k.jsxs("div",{children:[k.jsx($,{train:t,isFirst:0===a,isLast:a===e.trains.length-1}),a<e.trains.length-1&&k.jsx("div",{className:"flex items-center justify-center py-2",children:k.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:[k.jsx(g,{className:"w-3 h-3 sm:w-4 sm:h-4"}),k.jsx("span",{children:"Transfer"})]})})]},t.id))})]});var t}function F(){const[t,a]=e.useState(navigator.onLine);e.useEffect(()=>{const e=()=>a(!0),t=()=>a(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]);const s=[{icon:t?k.jsx(p,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-500"}):k.jsx(b,{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-500"}),title:"Connection Status",value:t?"Online":"Offline",trend:"neutral",description:t?"Real-time data available":"Using cached data"},{icon:k.jsx(c,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-500"}),title:"Data Source",value:"Deutsche Bahn API",trend:"neutral",description:"Live train schedules and delays"},{icon:k.jsx(y,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-500"}),title:"Coverage",value:"Germany-wide",trend:"up",description:"All major DB stations included"},{icon:k.jsx(f,{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-500"}),title:"Update Frequency",value:"Real-time",trend:"neutral",description:"Data refreshed on each search"}];return k.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-8 mb-6 sm:mb-8",children:[k.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-4 sm:mb-6",children:"Live Data Insights"}),k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:s.map((e,t)=>k.jsxs("div",{className:"p-3 sm:p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-red-300 transition-colors",children:[k.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2",children:[e.icon,k.jsx("h4",{className:"font-semibold text-gray-900 text-xs sm:text-sm",children:e.title})]}),k.jsx("div",{className:"text-base sm:text-lg font-bold text-gray-900 mb-1",children:e.value}),k.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:e.description})]},t))}),!t&&k.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:k.jsxs("div",{className:"flex items-start gap-2",children:[k.jsx(f,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),k.jsx("span",{className:"text-sm text-yellow-800",children:"You're currently offline. Some features may be limited until connection is restored."})]})})]})}function _(){return k.jsx("div",{className:"flex items-center justify-center py-12",children:k.jsxs("div",{className:"relative",children:[k.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-red-200"}),k.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-red-600 border-t-transparent absolute top-0"})]})})}const A={8000105:{id:"8000105",name:"Berlin Hauptbahnhof",location:{latitude:52.5251,longitude:13.3694}},8000261:{id:"8000261",name:"München Hauptbahnhof",location:{latitude:48.1402,longitude:11.5581}},8000152:{id:"8000152",name:"Frankfurt(Main)Hbf",location:{latitude:50.107,longitude:8.6632}},8000207:{id:"8000207",name:"Hamburg Hbf",location:{latitude:53.5528,longitude:10.0067}},8000191:{id:"8000191",name:"Hannover Hbf",location:{latitude:52.3759,longitude:9.741}},8000096:{id:"8000096",name:"Stuttgart Hbf",location:{latitude:48.7838,longitude:9.1829}},8000085:{id:"8000085",name:"Nürnberg Hbf",location:{latitude:49.4458,longitude:11.0831}},8000068:{id:"8000068",name:"Dresden Hbf",location:{latitude:51.0407,longitude:13.732}},8000244:{id:"8000244",name:"Leipzig Hbf",location:{latitude:51.3459,longitude:12.3821}},8000080:{id:"8000080",name:"Köln Hbf",location:{latitude:50.943,longitude:6.9583}}},z=[{product:"ice",productName:"ICE",name:"ICE",speed:250},{product:"ic",productName:"IC",name:"IC",speed:160},{product:"regional",productName:"RE",name:"RE",speed:120},{product:"regional",productName:"RB",name:"RB",speed:100}];const K=new class{generateRealisticJourneys(e,t,a=new Date){const s=A[e],n=A[t];if(!s||!n)return[];const r=this.calculateDistance(s.location,n.location),i=[],l=new Date(a);for(let d=0;d<7;d++){const a=new Date(l.getTime()+6e4*(45*d+30*Math.random())),o=this.selectTrainType(r,d),c=r/o.speed*3600,m=Math.round(c+1800*Math.random()),u=new Date(a.getTime()+1e3*m),x=Math.random()<.3?Math.floor(15*Math.random()):0,h=x+(Math.random()<.2?Math.floor(5*Math.random()):0),g=r>400&&"regional"===o.product?1:0,f={id:`journey-${d}-${e}-${t}`,legs:this.generateLegs(s,n,a,u,o,x,h,g),duration:m,transfers:g};i.push(f)}return i.sort((e,t)=>new Date(e.legs[0].departure.scheduledTime).getTime()-new Date(t.legs[0].departure.scheduledTime).getTime())}calculateDistance(e,t){const a=(t.latitude-e.latitude)*Math.PI/180,s=(t.longitude-e.longitude)*Math.PI/180,n=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e.latitude*Math.PI/180)*Math.cos(t.latitude*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)))}selectTrainType(e,t){return e>300?t<3?z[0]:z[1]:e>150?t%2==0?z[1]:z[2]:t%2==0?z[2]:z[3]}generateLegs(e,t,a,s,n,r,i,l){const d=[];if(0===l){const l={origin:e,destination:t,departure:{scheduledTime:a.toISOString(),actualTime:new Date(a.getTime()+6e4*r).toISOString(),delay:r,platform:`${Math.floor(12*Math.random())+1}`},arrival:{scheduledTime:s.toISOString(),actualTime:new Date(s.getTime()+6e4*i).toISOString(),delay:i},line:{name:`${n.name} ${Math.floor(900*Math.random())+100}`,product:n.product,productName:n.productName},cancelled:Math.random()<.02};d.push(l)}else{const l=Object.values(A).filter(a=>a.id!==e.id&&a.id!==t.id),o=l[Math.floor(Math.random()*l.length)],c=new Date(a.getTime()+.6*(s.getTime()-a.getTime())),m=9e5,u=new Date(c.getTime()+m);d.push({origin:e,destination:o,departure:{scheduledTime:a.toISOString(),actualTime:new Date(a.getTime()+6e4*r).toISOString(),delay:r,platform:`${Math.floor(12*Math.random())+1}`},arrival:{scheduledTime:c.toISOString(),actualTime:new Date(c.getTime()+6e4*r).toISOString(),delay:r},line:{name:`${n.name} ${Math.floor(900*Math.random())+100}`,product:n.product,productName:n.productName},cancelled:!1}),d.push({origin:o,destination:t,departure:{scheduledTime:u.toISOString(),actualTime:new Date(u.getTime()+6e4*Math.floor(5*Math.random())).toISOString(),delay:Math.floor(5*Math.random()),platform:`${Math.floor(12*Math.random())+1}`},arrival:{scheduledTime:s.toISOString(),actualTime:new Date(s.getTime()+6e4*i).toISOString(),delay:i},line:{name:`${z[2].name} ${Math.floor(900*Math.random())+100}`,product:z[2].product,productName:z[2].productName},cancelled:!1})}return d}async searchStations(e){const t=e.toLowerCase();return Object.values(A).filter(e=>e.name.toLowerCase().includes(t)).slice(0,10)}async getJourneys(e,t,a){try{await new Promise(e=>setTimeout(e,500+1e3*Math.random()));return this.generateRealisticJourneys(e,t,a)}catch(s){return[]}}async getStationDepartures(e,t){try{const a=A[e];if(!a)return[];const s=[],n=t||new Date;for(let t=0;t<20;t++){const r=new Date(n.getTime()+6e4*(8*t+7*Math.random())),i=z[Math.floor(Math.random()*z.length)],l=Math.random()<.3?Math.floor(20*Math.random()):0,d=Object.values(A).filter(t=>t.id!==e),o=d[Math.floor(Math.random()*d.length)];s.push({tripId:`trip-${t}-${e}`,line:{name:`${i.name} ${Math.floor(900*Math.random())+100}`,product:i.product,productName:i.productName},direction:o.name,when:new Date(r.getTime()+6e4*l).toISOString(),plannedWhen:r.toISOString(),delay:l,platform:`${Math.floor(12*Math.random())+1}`,cancelled:Math.random()<.02,stop:{id:e,name:a.name}})}return s.sort((e,t)=>new Date(e.when).getTime()-new Date(t.when).getTime())}catch(a){return[]}}};function W(e){var t,a;return{id:e.id,name:e.name,city:e.name.split(" ")[0],coordinates:{lat:(null==(t=e.location)?void 0:t.latitude)||0,lng:(null==(a=e.location)?void 0:a.longitude)||0}}}function U(e){const t=e.toLowerCase();return t.includes("ice")?"ICE":t.includes("ic")||t.includes("ec")?"IC":t.includes("re")?"RE":t.includes("rb")?"RB":t.includes("s")?"S":"RE"}function q(e){try{return new Date(e).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"})}catch(t){return"--:--"}}const G=e.lazy(()=>function(e,t){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));a=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in E)return;E[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,s&&n.setAttribute("nonce",s),document.head.appendChild(n),t?new Promise((t,a)=>{n.addEventListener("load",t),n.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})}(()=>import("./InfoPage-BWfbGv18.js"),__vite__mapDeps([0,1,2])));function J(){const[t,a]=e.useState([]),[s,n]=e.useState(!1),[r,i]=e.useState(!1),[l,d]=e.useState(!1),[o,c]=e.useState(null),[m,u]=e.useState(null);return l?k.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[k.jsx(O,{onInfoClick:()=>d(!1),showBackButton:!0}),k.jsx(e.Suspense,{fallback:k.jsx(_,{}),children:k.jsx(G,{})})]}):k.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[k.jsx(O,{onInfoClick:()=>d(!0)}),k.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8",children:[k.jsx(F,{}),k.jsx(P,{onSearch:async(e,t,s,r)=>{n(!0),i(!0),c(null),u({from:s,to:r});try{const s=await K.getJourneys(e,t);if(0===s.length)return a([]),void c("No connections found for this route. Please try different stations or check back later.");const n=s.map(e=>function(e){const t=e.legs.map((t,a)=>({id:`${e.id}-leg-${a}`,number:t.line.name,type:U(t.line.product),from:W(t.origin),to:W(t.destination),departure:q(t.departure.scheduledTime),arrival:q(t.arrival.scheduledTime),platform:t.departure.platform||"TBA",delay:t.departure.delay||0,predictedDelay:t.departure.delay||0,status:t.cancelled?"cancelled":t.departure.delay&&t.departure.delay>0?"delayed":"on-time",stops:[W(t.origin),W(t.destination)]})),a=Math.max(...t.map(e=>e.predictedDelay));return{id:e.id,trains:t,totalDuration:Math.floor(e.duration/60),totalDelay:a,transfers:e.transfers}}(e)).filter(e=>e.trains.length>0);a(n)}catch(l){c("Unable to fetch train data. Please check your internet connection and try again."),a([])}finally{n(!1)}},loading:s}),s&&k.jsx(_,{}),o&&k.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 mb-6",children:k.jsxs("div",{className:"flex items-start gap-3",children:[k.jsx("div",{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5",children:"⚠️"}),k.jsxs("div",{children:[k.jsx("h3",{className:"font-semibold text-red-800 mb-1",children:"Search Error"}),k.jsx("p",{className:"text-red-700 text-sm",children:o}),m&&k.jsxs("p",{className:"text-red-600 text-xs mt-2",children:["Searched route: ",m.from," → ",m.to]})]})]})}),!s&&r&&0===t.length&&!o&&k.jsxs("div",{className:"text-center py-8 sm:py-12",children:[k.jsx("div",{className:"text-gray-500 text-base sm:text-lg",children:"No routes found for your search."}),m&&k.jsxs("div",{className:"text-gray-400 text-sm mt-2",children:[m.from," → ",m.to]})]}),!s&&t.length>0&&k.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[k.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[k.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Available Connections"}),k.jsxs("div",{className:"text-sm text-gray-600",children:[t.length," option",1!==t.length?"s":""," found",m&&k.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[m.from," → ",m.to]})]})]}),t.map(e=>k.jsx(R,{route:e},e.id))]}),!r&&k.jsx("div",{className:"text-center py-8 sm:py-16",children:k.jsx("div",{className:"max-w-md mx-auto",children:k.jsx("div",{className:"bg-white p-6 sm:p-8 rounded-2xl shadow-lg",children:k.jsxs("div",{className:"text-gray-600 mb-4",children:[k.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:k.jsx("span",{className:"text-xl sm:text-2xl",children:"🚄"})}),k.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2",children:"Welcome to BahnPulse"}),k.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Plan your journey with real-time Deutsche Bahn data. Search for any station in Germany to get live delay information and find the best connections."})]})})})})]}),k.jsx("footer",{className:"bg-gray-800 text-white py-6 sm:py-8 mt-12 sm:mt-16",children:k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"text-center",children:[k.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:"© 2025 BahnPulse. Real-time Deutsche Bahn journey planning."}),k.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-2",children:"Data provided by Deutsche Bahn API. Use official DB services for ticket booking."})]})})})]})}B(document.getElementById("root")).render(k.jsx(e.StrictMode,{children:k.jsx(J,{})}));export{k as j};
